<?xml version='1.0' encoding='utf-8'?>
<sdf version="1.6" xmlns:xacro="http://www.ros.org/wiki/xacro">
  <xacro:macro name="Light_seeker" params='base_link:="base_link"'>
    <xacro:property name="groundz_z_offset" value="${0.1}"/>

    <link name="${base_link}">
      <pose frame="">0 0 0 0 0 0</pose>
      <inertial>
        <pose frame="">0 0 0.062329 0 -0 0</pose>
        <mass>46.064</mass>
        <inertia>
          <ixx>0.615397</ixx>
          <ixy>-0.0240585</ixy>
          <ixz>-0.120749</ixz>
          <iyy>1.75388</iyy>
          <iyz>-0.0028322</iyz>
          <izz>2.03641</izz>
        </inertia>
      </inertial>
      
      <visual name="base_link_visual">
        <pose frame="">-1.61181 -0.8536 ${-1.01698 - 0.19/2} ${pi/2} 0 ${pi/2}</pose>
        <geometry>
          <mesh>
            <scale>1 1 1</scale>
            <uri>model://Light_seeker/meshes/Light_seeker_base.dae</uri>
          </mesh>
        </geometry>
      </visual>
    </link>
      
      
      
      <velocity_decay/>
      <self_collide>0</self_collide>
      <enable_wind>0</enable_wind>
      <kinematic>0</kinematic>
      <gravity>1</gravity>
      <velocity_decay/>
      

    <link name="base_footprint">
      <pose frame="">0 0 -0.33 0 0 0</pose>
      <visual name="base_footprint_visual">
        <pose frame="">0 0 0 0 0 0</pose>
        <geometry>
          <box>
            <!-- pos: 0.256 -0.2854 wheel: 0.1143-->
            <!--<size>${(0.2854+0.1143)*2} ${0.256*2} 0.01</size>-->
            <size>0.94 ${0.345*2 + 0.145} 0.01</size>
          </box>
        </geometry>

        <material>
          <ambient>0.1 0.1 0.1 1.0</ambient>
          <diffuse>0.0 0.6 0.8 1.0</diffuse> 
          <specular>0.2 0.2 0.2 1.0</specular>
          <emissive>0 0 0 1.0</emissive>
        </material>

        <transparency>0.65</transparency>
      </visual>
    </link> 

  <joint name="base_footprint_to_base_link" type="fixed">
    <parent>${base_link}</parent>
    <child>base_footprint</child>
    <pose relative_to="${base_link}">0 0 -0.33 0 0 0</pose> <!--0.046? why?-->
  </joint>


    <link name="front_left_wheel_link">
      <pose frame="">0.295 0.345 -0.155 0 -0 0</pose>
      <inertial>
        <pose frame="">0 0 0 0 -0 0</pose>
        <mass>2.637</mass>
        <inertia>
          <ixx>0.02467</ixx>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyy>0.04411</iyy>
          <iyz>0</iyz>
          <izz>0.02467</izz>
        </inertia>
      </inertial>
      <collision name="front_left_wheel_link_collision">
        <pose frame="">0 0 0 0 ${pi/2} ${pi/2}</pose>
        <geometry>
          <cylinder>
            <length>0.145</length>
            <radius>0.175</radius>
          </cylinder>
        </geometry>
        <surface>
          <contact>
            <ode>
              <kp>1e+07</kp>
              <kd>1</kd>
            </ode>
          </contact>
          <friction>
            <ode>
              <mu>1.0</mu>
              <mu2>1</mu2>
              <slip1>0.0</slip1>
              <slip2>0.0</slip2>
              <fdir1>0 0 1</fdir1>
            </ode>
          </friction>
        </surface>
      </collision>
      <visual name="front_left_wheel_link_visual">
        <pose frame="">0 0 0 0 ${pi/2} ${pi/2}</pose>
        <geometry>
          <cylinder>
            <length>0.145</length>
            <radius>0.175</radius>
          </cylinder>

          <!--<mesh>
            <scale>1 1 1</scale>
            <uri>model://Husky_stripped_xacro/meshes/wheel.dae</uri>
          </mesh>-->
        </geometry>
      </visual>
      <gravity>1</gravity>
      <velocity_decay/>
    </link>
    <joint name="front_left_wheel_joint" type="revolute">
      <child>front_left_wheel_link</child>
      <parent>${base_link}</parent>
      <axis>
        <xyz>0 1 0</xyz>
        <limit>
          <lower>-1e+16</lower>
          <upper>1e+16</upper>
          <effort>50.0</effort>         <!-- allow the plugin to apply torque -->
          <velocity>100.0</velocity>    <!-- rad/s limit well above normal -->
        </limit>
        <dynamics>
          <spring_reference>0</spring_reference>
          <spring_stiffness>0</spring_stiffness>
          <damping>0.1</damping>        <!-- small damping prevents chatter -->
          <friction>0.0</friction>
        </dynamics>
        <use_parent_model_frame>1</use_parent_model_frame>
      </axis>
    </joint>
    <link name="front_right_wheel_link">
      <pose frame="">0.295 -0.345 -0.155 0 -0 0</pose>
      <inertial>
        <pose frame="">0 0 0 0 0 0</pose>
        <mass>2.637</mass>
        <inertia>
          <ixx>0.02467</ixx>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyy>0.04411</iyy>
          <iyz>0</iyz>
          <izz>0.02467</izz>
        </inertia>
      </inertial>
      <collision name="front_right_wheel_link_collision">
      <pose frame="">0 0 0 0 ${pi/2} ${pi/2}</pose>
        <geometry>
          <cylinder>
            <length>0.145</length>
            <radius>0.175</radius>
          </cylinder>
        </geometry>
        <surface>
          <contact>
            <ode>
              <kp>1e+07</kp>
              <kd>1</kd>
            </ode>
          </contact>
          <friction>
            <ode>
              <mu>1.0</mu>
              <mu2>1.0</mu2>
              <slip1>0.0</slip1>
              <slip2>0.0</slip2>
              <fdir1>0 0 1</fdir1>
            </ode>
          </friction>
        </surface>
      </collision>
      <visual name="front_right_wheel_link_visual">
          <pose frame="">0 0 0 0 ${pi/2} ${pi/2}</pose>
        <geometry>
          <cylinder>
            <length>0.145</length>
            <radius>0.175</radius>
          </cylinder>

          <!--<mesh>
            <scale>1 1 1</scale>
            <uri>model://Husky_stripped_xacro/meshes/wheel.dae</uri>
          </mesh>-->
        </geometry>
      </visual>
      <gravity>1</gravity>
      <velocity_decay/>
    </link>
    <joint name="front_right_wheel_joint" type="revolute">
      <child>front_right_wheel_link</child>
      <parent>${base_link}</parent>
      <axis>
        <xyz>0 1 0</xyz>
        <limit>
          <lower>-1e+16</lower>
          <upper>1e+16</upper>
          <effort>50.0</effort>         <!-- allow the plugin to apply torque -->
          <velocity>100.0</velocity>    <!-- rad/s limit well above normal -->
        </limit>
        <dynamics>
          <spring_reference>0</spring_reference>
          <spring_stiffness>0</spring_stiffness>
          <damping>0.1</damping>        <!-- small damping prevents chatter -->
          <friction>0.0</friction>
        </dynamics>
        <use_parent_model_frame>1</use_parent_model_frame>
      </axis>
    </joint>
    <link name="rear_left_wheel_link">
      <pose frame="">-0.295 0.345 -0.155 0 -0 0</pose>
      <inertial>
        <pose frame="">0 0 0 0 0 0</pose>
        <mass>2.637</mass>
        <inertia>
          <ixx>0.02467</ixx>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyy>0.04411</iyy>
          <iyz>0</iyz>
          <izz>0.02467</izz>
        </inertia>
      </inertial>
      <collision name="rear_left_wheel_link_collision">
        <pose frame="">0 0 0 0 ${pi/2} ${pi/2}</pose>
        <geometry>
          <cylinder>
            <length>0.145</length>
            <radius>0.175</radius>
          </cylinder>
        </geometry>
        <surface>
          <contact>
            <ode>
              <kp>1e+07</kp>
              <kd>1</kd>
            </ode>
          </contact>
          <friction>
            <ode>
              <mu>1.0</mu>
              <mu2>1.0</mu2>
              <slip1>0.0</slip1>
              <slip2>0.0</slip2>
              <fdir1>0 0 1</fdir1>
            </ode>
          </friction>
        </surface>
      </collision>
      <visual name="rear_left_wheel_link_visual">
        <pose frame="">0 0 0 0 ${pi/2} ${pi/2}</pose>
        <geometry>
          <cylinder>
            <length>0.145</length>
            <radius>0.175</radius>
          </cylinder>

          <!--<mesh>
            <scale>1 1 1</scale>
            <uri>model://Husky_stripped_xacro/meshes/wheel.dae</uri>
          </mesh>-->
        </geometry>
      </visual>
      <gravity>1</gravity>
      <velocity_decay/>
    </link>
    <joint name="rear_left_wheel_joint" type="revolute">
      <child>rear_left_wheel_link</child>
      <parent>${base_link}</parent>
      <axis>
        <xyz>0 1 0</xyz>
        <limit>
          <lower>-1e+16</lower>
          <upper>1e+16</upper>
          <effort>50.0</effort>         <!-- allow the plugin to apply torque -->
          <velocity>100.0</velocity>    <!-- rad/s limit well above normal -->
        </limit>
        <dynamics>
          <spring_reference>0</spring_reference>
          <spring_stiffness>0</spring_stiffness>
          <damping>0.1</damping>        <!-- small damping prevents chatter -->
          <friction>0.0</friction>
        </dynamics>
        <use_parent_model_frame>1</use_parent_model_frame>
      </axis>
    </joint>
    <link name="rear_right_wheel_link">
      <pose frame="">-0.295 -0.345 -0.155 0 -0 0</pose>
      <inertial>
        <pose frame="">0 0 0 0 0 0</pose>
        <mass>2.637</mass>
        <inertia>
          <ixx>0.02467</ixx>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyy>0.04411</iyy>
          <iyz>0</iyz>
          <izz>0.02467</izz>
        </inertia>
      </inertial>
      <collision name="rear_right_wheel_link_collision">
        <pose frame="">0 0 0 0 ${pi/2} ${pi/2}</pose>
        <geometry>
          <cylinder>
            <length>0.145</length>
            <radius>0.175</radius>
          </cylinder>
        </geometry>
        <surface>
          <contact>
            <ode>
              <kp>1e+07</kp>
              <kd>1</kd>
            </ode>
          </contact>
          <friction>
            <ode>
              <mu>1.0</mu>
              <mu2>1.0</mu2>
              <slip1>0.0</slip1>
              <slip2>0.0</slip2>
              <fdir1>0 0 1</fdir1>
            </ode>
          </friction>
        </surface>
      </collision>
      <visual name="rear_right_wheel_link_visual">
        <pose frame="">0 0 0 0 ${pi/2} ${pi/2}</pose>
        <geometry>
          <cylinder>
            <length>0.145</length>
            <radius>0.175</radius>
          </cylinder>

          <!--<mesh>
            <scale>1 1 1</scale>
            <uri>model://Husky_stripped_xacro/meshes/wheel.dae</uri>
          </mesh>-->
        </geometry>
      </visual>
      <gravity>1</gravity>
      <velocity_decay/>
    </link>
    <joint name="rear_right_wheel_joint" type="revolute">
      <child>rear_right_wheel_link</child>
      <parent>${base_link}</parent>
      <axis>
        <xyz>0 1 0</xyz>
        <limit>
          <lower>-1e+16</lower>
          <upper>1e+16</upper>
          <effort>50.0</effort>         <!-- allow the plugin to apply torque -->
          <velocity>100.0</velocity>    <!-- rad/s limit well above normal -->
        </limit>
        <dynamics>
          <spring_reference>0</spring_reference>
          <spring_stiffness>0</spring_stiffness>
          <damping>0.1</damping>        <!-- small damping prevents chatter -->
          <friction>0.0</friction>
        </dynamics>
        <use_parent_model_frame>1</use_parent_model_frame>
      </axis>
    </joint>

    <link name="Top_plate_link">
      
    </link>

    <joint name="Top_plate_joint" type="fixed">
      <child>Top_plate_link</child>
      <parent>${base_link}</parent>
      <pose relative_to ="${base_link}">0 0 0.095 0 0 0</pose>
    </joint>

    <static>false</static>
    <plugin name="gz::sim::systems::DiffDrive" filename="gz-sim-diff-drive-system">
      <!-- Use your real joint names here -->
      <left_joint>front_left_wheel_joint</left_joint>
      <left_joint>rear_left_wheel_joint</left_joint>
      <right_joint>front_right_wheel_joint</right_joint>
      <right_joint>rear_right_wheel_joint</right_joint>

      <!-- Tune to your modelâ€™s geometry -->
      <wheel_separation>0.835</wheel_separation>
      <wheel_radius>0.145</wheel_radius> 

      <!-- Topics / frames -->
      <topic>/cmd_vel</topic>
      <odom_topic>/odometry/wheel</odom_topic>
      <odom_frame>odom</odom_frame>
      <frame_id>odom</frame_id>
      <child_frame_id>${base_link}</child_frame_id>
      <robot_base_frame>${base_link}</robot_base_frame>
      <publish_odom>true</publish_odom>
      <publish_tf>false</publish_tf>
    </plugin>
  </xacro:macro>
</sdf>
  